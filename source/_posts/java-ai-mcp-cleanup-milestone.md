---
title: "里程碑进展：Java AI 模块配置与依赖清理（MCP 版）"
date: 2026-02-20 22:44:15
categories:
  - "AI"
tags:
  - "AI工程"
  - "Java"
  - "MCP"
  - "里程碑"
  - "依赖治理"
  - "配置清理"
---

## 里程碑范围

本次里程碑聚焦 Java 侧 AI 模块的“减法治理”：明确 MCP 方案的保留项，移除历史遗留配置与依赖，降低维护复杂度并收敛运行面。

## 配置清理结果（YAML）

在本地 YAML 配置中，已完成 MCP-only 重构的配置收口：

1. 删除历史遗留且已废弃的配置段：`ai.model`、`ai.store`、`ai.prompt`、`ai.archive`。
2. 保留当前仍在使用的配置段：`ai.mcp`、`ai.dify`。
3. 结果：配置语义与当前架构一致，避免“看得见但不会生效”的伪配置继续干扰排查。

## 依赖清理结果（POM）

在 `pom` 依赖中，已完成未使用 legacy AI 依赖剔除：

1. 移除：`langchain4j-dashscope`、`langchain4j-open-ai`。
2. 保留：`langchain4j` 核心能力（按当前实现需要）与 `dashscope-sdk-java`（在需要的位置继续使用）。
3. 结果：依赖树更干净，后续升级与漏洞治理成本下降。

## 验证结论

已执行编译验证命令并通过：

```bash
mvn -pl ruoyi-admin -am -DskipTests compile
```

这说明本次“配置 + 依赖”清理在当前里程碑范围内未引入编译级回归。

## 当前验收状态

当前里程碑验收状态：**已通过（范围内通过）**。

说明：

1. MCP 方向相关配置与依赖清理目标已达成。
2. 编译链路已验证可通过。
3. 全量测试基线仍存在历史遗留的无关失败项，本次不作为阻塞项。

## 下一步计划

1. 建立并收敛一版“可重复”的全量测试基线，先对历史失败做归因分层（本次改动相关 / 无关）。
2. 在 CI 中补充针对 AI 模块的最小回归检查（至少覆盖配置加载、关键 Bean 初始化、核心调用链烟测）。
3. 持续推进 legacy 残留项扫描，避免后续分支再次引入已移除依赖或配置段。
