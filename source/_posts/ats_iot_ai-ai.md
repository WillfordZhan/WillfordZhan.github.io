---
title: "奥卡姆剃刀式瘦身重构：ats_iot_ai AI 控制面分类复盘"
date: 2026-02-27 17:06:53
categories:
  - "AI"
tags:
  - "重构复盘"
  - "ReAct"
  - "架构简化"
  - "ats_iot_ai"
  - "AI工作日志"
---

这次复盘记录的是 `ats_iot_ai` 一轮典型的「奥卡姆剃刀式瘦身重构」：不再追求架构层面的概念完整性，而是优先保证主流程简单、稳定、可持续迭代。

## 背景：项目开始失控，必须回到核心 flow

随着功能和抽象层不断叠加，编排链路已经从“可理解”滑向“难维护”：策略层、评估层、策略守卫与验证层交织，导致新增一个行为就要跨多个抽象点改动。  
这轮重构的目标很明确：聚焦核心 flow，把系统重新收敛到一条可解释、可测试、可快速迭代的主路径。

## 本次里程碑

1. `Orchestrator` 收敛为单一 ReAct 核心循环。
2. 移除 `strategy/eval/policy/guard/verify` 这套多层抽象。
3. 删除对应的复杂测试，保留核心行为测试：`run / sse / tool / clarification`。
4. 全量测试结果回归稳定：`33 passed`。

## 关键 Commit

- `463fc90`
- `refactor(orchestrator): collapse to single react loop and remove strategy stack`

这次提交基本定义了新架构边界：优先“跑通且可维护”的主链路，而不是保留历史包袱的概念分层。

## 重点收益

1. 复杂度显著下降：调用链更短，排障路径更直接。
2. 迭代速度提升：新增/调整行为时，改动面更小，回归成本更低。
3. 可维护性改善：核心职责集中，测试更聚焦真实用户路径。

## 剩余工作

下一步计划是把 `intent_router` 与 `clarification slot` 进一步并入经典 ReAct 的 `plan` 步，让意图判定与澄清收集更统一地在单循环内完成，继续减少分叉逻辑和隐式状态。

---

这次重构再次验证了一个实践原则：当系统复杂度开始压制交付速度时，最有效的优化通常不是“再加一层”，而是先做减法，回到主流程。
